<ion-content #pageContent>
  <main>
    <div class="container-filter">
      <ion-searchbar [(ngModel)]="searchTerm" (ionInput)="buscarPorTexto()" placeholder="Ingrese nombre de etiqueta"></ion-searchbar>
      <ion-select [(ngModel)]="selectedGrupo" name="select">
        <ion-select-option *ngFor="let grupo of uniqueGrupos" [value]="grupo">{{grupo}}</ion-select-option>
        <ion-select-option value="">Todos</ion-select-option>
      </ion-select>
      <ion-button color="danger" (click)="resetearDatos()">Resetear inventario</ion-button>

      <ion-button (click)="buscarProductosPorGrupo()">Buscar</ion-button>
    </div>

    <ion-grid class="background-gradient card-glass">
      <ion-row  class="row-header">
        <ion-col>Imagen</ion-col>
        <ion-col>SKU</ion-col>
        <ion-col>Grupo</ion-col>
        <ion-col>Etiqueta/Producto</ion-col>
        <ion-col>Rollos</ion-col>
        <ion-col>Rollos Totales</ion-col>
        <ion-col>Cajas Totales</ion-col>
        <ion-col>Stock Cr√≠tico</ion-col>
        <ion-col>Edicion</ion-col>
      </ion-row>

      <ion-row *ngFor="let item of productosFiltrados">
        <ion-col class="colorEti"><img [src]="item.fotos" alt="{{ item.sku }}"></ion-col>
        <ion-col class="colorEti">{{ item.sku }}</ion-col>
        <ion-col class="colorEti">{{item.grupo}}</ion-col>
        <ion-col class="colorEti">{{ item.producto }}</ion-col>
        <ion-col class="colorEti">{{ item.rollos }}</ion-col>
        <ion-col class="colorEti">{{item.rollosT}}</ion-col>
        <ion-col class="colorEti">{{item.cajaT}} 
          <span class="stock-critico" *ngIf="item.cajaT <= item.stockCritico">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
              <g fill="none">
                <path fill="#e33030" fill-opacity="0.16" d="M10.575 5.217L3.517 17a1.667 1.667 0 0 0 1.425 2.5h14.116a1.666 1.666 0 0 0 1.425-2.5L13.426 5.217a1.666 1.666 0 0 0-2.85 0" />
                <path stroke="#e33030" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="1.5" d="M12 16h.008M12 10v3m-1.425-7.783L3.517 17a1.667 1.667 0 0 0 1.425 2.5h14.116a1.666 1.666 0 0 0 1.425-2.5L13.426 5.217a1.666 1.666 0 0 0-2.85 0" />
              </g>
            </svg>
          </span>
        </ion-col>
        <ion-col class="colorEti">{{item.stockCritico}}</ion-col>
        <ion-col class="colorEti" style="display: flex; flex-direction: column; gap: 0.5rem;"><a class="btn-edicion" (click)="abrirModalAgregar(item)"><img src="/assets/icon/add-box.svg"></a><a class="btn-edicion" (click)="abrirModalEliminar(item)"><img src="/assets/icon/trash.svg"></a></ion-col>
      </ion-row>
    </ion-grid>

    <ion-fab vertical="bottom" horizontal="start" slot="fixed" style="position: fixed; margin: 1rem;" >
      <ion-fab-button (click)="irArriba()" style="--background: #007bff; --color: white;">
        <ion-icon src="/assets/icon/up.svg" ></ion-icon>
      </ion-fab-button>
    </ion-fab>
  </main>
</ion-content>

